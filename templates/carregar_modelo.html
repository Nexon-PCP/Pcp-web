{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Carregar Modelo de OP</h2>
  <p><strong>Produto:</strong> {{op.produto}}</p>
  <p><strong>OP:</strong> {{op.numero}}</p>
  
  {% if modelos %}
    <form method="post" action="/op/{{op.id}}/carregar-modelo">
      <div style="margin-bottom: 16px;">
        <label for="modelo_id" style="display: block; margin-bottom: 8px; font-weight: bold;">Selecione um modelo:</label>
        <select name="modelo_id" id="modelo_id" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
          <option value="">-- Escolha um modelo --</option>
          {% for modelo in modelos %}
            <option value="{{modelo.id}}">
              {{modelo.nome}} ({{modelo.data_criacao.strftime('%d/%m/%Y %H:%M')}})
            </option>
          {% endfor %}
        </select>
      </div>
      
      <div style="display: flex; gap: 8px;">
        <button type="submit" style="background-color: #4caf50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">✅ Carregar Modelo</button>
        <a href="/ops/{{op.id}}" style="background-color: #999; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; text-decoration: none; display: inline-block;">❌ Cancelar</a>
      </div>
    </form>
  {% else %}
    <div style="background-color: #fff3cd; padding: 12px; border-radius: 4px; margin-bottom: 16px;">
      <p style="margin: 0; color: #856404;"><strong>⚠️ Nenhum modelo disponível</strong></p>
      <p style="margin: 8px 0 0 0; color: #856404;">Não há modelos salvos para o produto <strong>{{op.produto}}</strong>.</p>
      <p style="margin: 8px 0 0 0; color: #856404;">Crie uma OP com etapas e tarefas, depois clique em "Salvar Modelo" para reutilizá-la.</p>
    </div>
    <a href="/ops/{{op.id}}" style="background-color: #999; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; text-decoration: none; display: inline-block;">Voltar</a>
  {% endif %}
</div>
{% endblock %}
