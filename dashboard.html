{% extends "base.html" %}
{% block top_title %}Dashboard{% endblock %}
{% block content %}

<div class="card">
  <h2 style="margin:0; font-size: 48px;">Produ칞칚o NTC</h2>
</div>

<div class="card">
  <div class="kpi">
    <div class="box">
      <div class="muted" style="font-size: 36px;">Obras</div>
      <div class="n" style="font-size: 288px;">{{obras_total}}</div>
    </div>
    <div class="box">
      <div class="muted" style="font-size: 36px;">OPs</div>
      <div class="n" style="font-size: 288px;">{{ops_total}}</div>
    </div>
    <div class="box">
      <div class="muted" style="font-size: 36px;">Apontamentos</div>
      <div class="n" style="font-size: 96px;">{{ap_total}}</div>
    </div>
  </div>
</div>

<div class="card">
  <h3 style="margin-top:0; font-size: 36px;">Status das Obras</h3>

  <div class="row" style="gap:12px;margin-bottom:10px">
    <span class="badge b-aberta" style="font-size: 24px; padding: 12px 24px;">游댯 Abertas: {{obras_abertas}}</span>
    <span class="badge b-execucao" style="font-size: 24px; padding: 12px 24px;">游리 Em Execu칞칚o: {{obras_em_exec}}</span>
    <span class="badge b-concluida" style="font-size: 24px; padding: 12px 24px;">游릭 Conclu칤das: {{obras_concluidas}}</span>
    <span class="badge b-atrasada" style="font-size: 24px; padding: 12px 24px;">游댮 Atrasadas: {{obras_atrasadas}}</span>
  </div>

  {% set total_obras = (obras_abertas + obras_em_exec + obras_concluidas) %}
  {% if total_obras > 0 %}
    <div style="height:18px;border-radius:999px;border:1px solid #1f3650;background:rgba(255,255,255,.03);overflow:hidden">
      <div style="height:100%;width:{{(obras_abertas/total_obras)*100}}%;background:rgba(148,163,184,.35);float:left"></div>
      <div style="height:100%;width:{{(obras_em_exec/total_obras)*100}}%;background:rgba(34,197,94,.25);float:left"></div>
      <div style="height:100%;width:{{(obras_concluidas/total_obras)*100}}%;background:rgba(56,189,248,.25);float:left"></div>
    </div>
    <p class="muted" style="margin-top:10px;font-size:13px">Barra de distribui칞칚o dos status (simples e r치pida).</p>
  {% else %}
    <p class="muted">Crie algumas Obras para o dashboard mostrar indicadores.</p>
  {% endif %}
</div>

<div class="card">
  <h3 style="margin-top:0; font-size: 36px;">Status das OPs</h3>

  <div class="row" style="gap:12px;margin-bottom:10px">
    <span class="badge b-aberta" style="font-size: 24px; padding: 12px 24px;">游댯 Abertas: {{abertas}}</span>
    <span class="badge b-execucao" style="font-size: 24px; padding: 12px 24px;">游리 Em Produ칞칚o: {{em_prod}}</span>
    <span class="badge b-concluida" style="font-size: 24px; padding: 12px 24px;">游릭 Conclu칤das: {{concluidas}}</span>
    <span class="badge b-atrasada" style="font-size: 24px; padding: 12px 24px;">游댮 Atrasadas: {{atrasadas}}</span>
  </div>

  {% set total = (abertas + em_prod + atrasadas + concluidas) %}
  {% if total > 0 %}
    <div style="height:18px;border-radius:999px;border:1px solid #1f3650;background:rgba(255,255,255,.03);overflow:hidden">
      <div style="height:100%;width:{{(abertas/total)*100}}%;background:rgba(148,163,184,.35);float:left"></div>
      <div style="height:100%;width:{{(em_prod/total)*100}}%;background:rgba(34,197,94,.25);float:left"></div>
      <div style="height:100%;width:{{(atrasadas/total)*100}}%;background:rgba(245,158,11,.25);float:left"></div>
      <div style="height:100%;width:{{(concluidas/total)*100}}%;background:rgba(56,189,248,.25);float:left"></div>
    </div>
    <p class="muted" style="margin-top:10px;font-size:13px">Barra de distribui칞칚o dos status (simples e r치pida).</p>
  {% else %}
    <p class="muted">Crie algumas OPs para o dashboard mostrar indicadores.</p>
  {% endif %}
</div>

<div class="card">
  <h3 style="margin-top:0">Atalhos</h3>
  <div class="row">
    <a href="/ops"><button class="primary">OPs</button></a>
    <a href="/apontamentos"><button class="primary">Apontar Produ칞칚o</button></a>
    <a href="/cronograma"><button class="primary">Cronograma</button></a>
    <a href="/relatorios"><button>Relat칩rios</button></a>
  </div>
</div>

{% endblock %}
